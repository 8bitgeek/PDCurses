# Makefile for PDCurses library for AIX/X11

SHELL		= @SHELL@
THIS		= Makefile

@SET_MAKE@

PDCURSES_HOME	= ..

osdir		= .
srcdir		= $(PDCURSES_HOME)/pdcurses
pandir		= $(PDCURSES_HOME)/panel

PDCURSES_CONFIG_H	=$(PDCURSES_HOME)/config.h
PDCURSES_CURSES_H	=$(PDCURSES_HOME)/curses.h
PDCURSES_CURSPRIV_H	=$(PDCURSES_HOME)/curspriv.h
PDCURSES_HEADERS	=$(PDCURSES_CONFIG_H) $(PDCURSES_CURSES_H) $(PDCURSES_CURSPRIV_H)
PDCURSES_X11_H		=$(osdir)/pdcx11.h

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@

DYN_COMP	= @DYN_COMP@
MH_EXTRA_LIBS	= @MH_EXTRA_LIBS@

CC		= @CC@
CFLAGS		= @CFLAGS@ $(DYN_COMP)

CPPFLAGS	= @DEFS@ -DXCURSES @SYS_DEFS@ -I$(PDCURSES_HOME)

CCFLAGS		= -c $(CFLAGS) $(CPPFLAGS) @MH_XINC_DIR@

LINK		= $(CC)
LDFLAGS		= 

LIBRARIES	= libXCurses.a libpanel.a

################################################################################
all :	$(LIBRARIES)

install : 
	echo Does nothing at the moment

clean :
	-rm -rf *.o *.sho trace $(LIBRARIES)

distclean: clean
	-rm -f Makefile

mostlyclean: clean

realclean: distclean

#------------------------------------------------------------------------

LIBOBJS = addch.o addchstr.o addstr.o attr.o beep.o bkgd.o border.o \
clear.o color.o delch.o deleteln.o getch.o getstr.o getyx.o inch.o \
inchstr.o initscr.o inopts.o insch.o insstr.o instr.o kernel.o mouse.o \
move.o outopts.o overlay.o pad.o printw.o refresh.o scanw.o scr_dump.o \
scroll.o slk.o termattr.o terminfo.o touch.o util.o window.o pdcdebug.o

PDCOBJS = pdcclip.o pdcdisp.o pdcgetsc.o pdckbd.o pdcscrn.o pdcsetsc.o \
pdcutil.o pdcx11.o x11.o sb.o ScrollBox.o

PANOBJS = panel.o


libXCurses.a : $(LIBOBJS) $(PDCOBJS) curses.exp ../x11/xcurses.exp
	ld -bnoentry -bM:SRE -bE:curses.exp $(MH_LIBS) $(MH_EXTRA_LIBS) $(LIBOBJS) $(PDCOBJS) -o $@

libpanel.a : $(PANOBJS)
        ar rv $@ $?
        -$(RANLIB) $@

$(LIBOBJS) $(PDCOBJS) $(PANOBJS) : $(PDCURSES_HEADERS)
$(PDCOBJS) : $(PDCURSES_X11_H)
terminfo.o: $(TERM_HEADER)


curses.exp: ../win32/curses.def ../x11/xcurses.exp
	cp ../x11/xcurses.exp ./curses.exp
	grep ^EXPORTS ../win32/curses.def | cut -f 2 -d\ >> curses.exp


addch.o: $(srcdir)/addch.c
	$(CC) $(CCFLAGS) $(srcdir)/addch.c

addchstr.o: $(srcdir)/addchstr.c
	$(CC) $(CCFLAGS) $(srcdir)/addchstr.c

addstr.o: $(srcdir)/addstr.c
	$(CC) $(CCFLAGS) $(srcdir)/addstr.c

attr.o: $(srcdir)/attr.c
	$(CC) $(CCFLAGS) $(srcdir)/attr.c

beep.o: $(srcdir)/beep.c
	$(CC) $(CCFLAGS) $(srcdir)/beep.c

bkgd.o: $(srcdir)/bkgd.c
	$(CC) $(CCFLAGS) $(srcdir)/bkgd.c

border.o: $(srcdir)/border.c
	$(CC) $(CCFLAGS) $(srcdir)/border.c

clear.o: $(srcdir)/clear.c
	$(CC) $(CCFLAGS) $(srcdir)/clear.c

color.o: $(srcdir)/color.c
	$(CC) $(CCFLAGS) $(srcdir)/color.c

delch.o: $(srcdir)/delch.c
	$(CC) $(CCFLAGS) $(srcdir)/delch.c

deleteln.o: $(srcdir)/deleteln.c
	$(CC) $(CCFLAGS) $(srcdir)/deleteln.c

getch.o: $(srcdir)/getch.c
	$(CC) $(CCFLAGS) $(srcdir)/getch.c

getstr.o: $(srcdir)/getstr.c
	$(CC) $(CCFLAGS) $(srcdir)/getstr.c

getyx.o: $(srcdir)/getyx.c
	$(CC) $(CCFLAGS) $(srcdir)/getyx.c

inch.o: $(srcdir)/inch.c
	$(CC) $(CCFLAGS) $(srcdir)/inch.c

inchstr.o: $(srcdir)/inchstr.c
	$(CC) $(CCFLAGS) $(srcdir)/inchstr.c

initscr.o: $(srcdir)/initscr.c
	$(CC) $(CCFLAGS) $(srcdir)/initscr.c

inopts.o: $(srcdir)/inopts.c
	$(CC) $(CCFLAGS) $(srcdir)/inopts.c

insch.o: $(srcdir)/insch.c
	$(CC) $(CCFLAGS) $(srcdir)/insch.c

insstr.o: $(srcdir)/insstr.c
	$(CC) $(CCFLAGS) $(srcdir)/insstr.c

instr.o: $(srcdir)/instr.c
	$(CC) $(CCFLAGS) $(srcdir)/instr.c

kernel.o: $(srcdir)/kernel.c
	$(CC) $(CCFLAGS) $(srcdir)/kernel.c

mouse.o: $(srcdir)/mouse.c
	$(CC) $(CCFLAGS) $(srcdir)/mouse.c

move.o: $(srcdir)/move.c
	$(CC) $(CCFLAGS) $(srcdir)/move.c

outopts.o: $(srcdir)/outopts.c
	$(CC) $(CCFLAGS) $(srcdir)/outopts.c

overlay.o: $(srcdir)/overlay.c
	$(CC) $(CCFLAGS) $(srcdir)/overlay.c

pad.o: $(srcdir)/pad.c
	$(CC) $(CCFLAGS) $(srcdir)/pad.c

printw.o: $(srcdir)/printw.c
	$(CC) $(CCFLAGS) $(srcdir)/printw.c

refresh.o: $(srcdir)/refresh.c
	$(CC) $(CCFLAGS) $(srcdir)/refresh.c

scanw.o: $(srcdir)/scanw.c
	$(CC) $(CCFLAGS) $(srcdir)/scanw.c

scr_dump.o: $(srcdir)/scr_dump.c
	$(CC) $(CCFLAGS) $(srcdir)/scr_dump.c

scroll.o: $(srcdir)/scroll.c
	$(CC) $(CCFLAGS) $(srcdir)/scroll.c

slk.o: $(srcdir)/slk.c
	$(CC) $(CCFLAGS) $(srcdir)/slk.c

termattr.o: $(srcdir)/termattr.c
	$(CC) $(CCFLAGS) $(srcdir)/termattr.c

terminfo.o: $(srcdir)/terminfo.c
	$(CC) $(CCFLAGS) $(srcdir)/terminfo.c

touch.o: $(srcdir)/touch.c
	$(CC) $(CCFLAGS) $(srcdir)/touch.c

util.o: $(srcdir)/util.c
	$(CC) $(CCFLAGS) $(srcdir)/util.c

window.o: $(srcdir)/window.c
	$(CC) $(CCFLAGS) $(srcdir)/window.c

pdcdebug.o: $(srcdir)/pdcdebug.c
	$(CC) $(CCFLAGS) $(srcdir)/pdcdebug.c


pdcclip.o: $(osdir)/pdcclip.c
	$(CC) $(CCFLAGS) $(osdir)/pdcclip.c

pdcdisp.o: $(osdir)/pdcdisp.c
	$(CC) $(CCFLAGS) $(osdir)/pdcdisp.c

pdcgetsc.o: $(osdir)/pdcgetsc.c
	$(CC) $(CCFLAGS) $(osdir)/pdcgetsc.c

pdckbd.o: $(osdir)/pdckbd.c
	$(CC) $(CCFLAGS) $(osdir)/pdckbd.c

pdcscrn.o: $(osdir)/pdcscrn.c
	$(CC) $(CCFLAGS) $(osdir)/pdcscrn.c

pdcsetsc.o: $(osdir)/pdcsetsc.c
	$(CC) $(CCFLAGS) $(osdir)/pdcsetsc.c

pdcutil.o: $(osdir)/pdcutil.c
	$(CC) $(CCFLAGS) $(osdir)/pdcutil.c

pdcx11.o: $(osdir)/pdcx11.c
	$(CC) $(CCFLAGS) $(osdir)/pdcx11.c

ScrollBox.o: $(osdir)/ScrollBox.c
	$(CC) $(CCFLAGS) $(osdir)/ScrollBox.c

sb.o: $(osdir)/sb.c
	$(CC) $(CCFLAGS) $(osdir)/sb.c

x11.o: $(osdir)/x11.c
	$(CC) $(CCFLAGS) $(osdir)/x11.c


panel.o: $(pandir)/panel.c $(PDCURSES_HOME)/panel.h
	$(CC) $(CCFLAGS) $(pandir)/panel.c
