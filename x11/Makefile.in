# Makefile for XCurses library
#
# The variable 'srcdir' refers to the source-distribution, and can be set with
# the configure script by "--srcdir=DIR".
#

SHELL		= /bin/sh
THIS		= Makefile

@SET_MAKE@

osdir		= @srcdir@
srcdir		= $(osdir)/../pdcurses
pandir		= $(osdir)/../panel
demodir		= $(osdir)/../demos

VPATH		= @srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
libdir		= $(exec_prefix)
includedir	= @includedir@

PDCURSES_HOME		=$(srcdir)/..
PDCURSES_CONFIG_H	=../config.h
PDCURSES_CURSES_H	=$(PDCURSES_HOME)/curses.h
PDCURSES_CURSPRIV_H	=$(PDCURSES_HOME)/curspriv.h
PDCURSES_HEADERS	=$(PDCURSES_CONFIG_H) $(PDCURSES_CURSES_H) $(PDCURSES_CURSPRIV_H)
PDCURSES_X11_H		=$(osdir)/pdcx11.h

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@

SHL_TARGETS	= @SHL_TARGETS@
DYN_COMP	= @DYN_COMP@
SHLPRE		= @SHLPRE@
SHLPST		= @SHLPST@
LD_RXLIB1	= @LD_RXLIB1@
LD_RXLIB2	= @MH_XLIBS@ @MH_EXTRA_LIBS@ -lc
O2SAVE		= @O2SAVE@
O2SHO		= @O2SHO@
CC2O		= @CC2O@
SAVE2O		= @SAVE2O@
DYNAMIC_LDFLAGS = @DYNAMIC_LDFLAGS@ $(EEXTRA)

CC		= @CC@
CFLAGS		= @CFLAGS@

CPPFLAGS	= -I$(PDCURSES_HOME) -I$(srcdir) @DEFS@ -DXCURSES @SYS_DEFS@ -I$(osdir)

CCFLAGS		= -c $(CFLAGS) $(CPPFLAGS) @MH_XINC_DIR@

LINK		= @PURIFY@ $(CC)
#LDFLAGS	= $(LIB_DEPS) @LDFLAGS@ @LIBS@ @MH_XLIBS@ @MH_EXTRA_LIBS@
LDFLAGS		= $(LIBCURSES) @LDFLAGS@ @LIBS@ @MH_XLIBS@ @MH_EXTRA_LIBS@

RANLIB		= @RANLIB@

LIBCURSES	= libXCurses.a
LIBPANEL	= libpanel.a

LIB_DEPS        = -L$(PDCURSES_HOME)/x11 -lXCurses
PANEL_LIB       = -L$(PDCURSES_HOME)/x11 -lpanel

PDCLIBS		= $(LIBCURSES) $(LIBPANEL)
DEMOS		= firework newdemo ptest rain testcurs tuidemo worm xmas

SHLFILE		= XCurses

################################################################################
all:	$(PDCLIBS) $(SHL_TARGETS) $(DEMOS)

install:
	echo Does nothing at the moment

clean:
	-rm -rf *.o *.sho trace $(PDCLIBS) $(SHL_TARGETS) $(DEMOS)

demos:	$(DEMOS)

distclean: clean
	-rm -f Makefile

mostlyclean: clean

realclean: distclean

#------------------------------------------------------------------------

LIBOBJS = addch.o addchstr.o addstr.o attr.o beep.o bkgd.o border.o \
clear.o color.o delch.o deleteln.o getch.o getstr.o getyx.o inch.o \
inchstr.o initscr.o inopts.o insch.o insstr.o instr.o kernel.o mouse.o \
move.o outopts.o overlay.o pad.o printw.o refresh.o scanw.o scr_dump.o \
scroll.o slk.o termattr.o terminfo.o touch.o util.o window.o

PDCOBJS = pdcclip.o pdcdebug.o pdcdisp.o pdcgetsc.o pdckbd.o \
pdckey.o pdcscrn.o pdcsetsc.o pdcutil.o pdcwin.o

X11OBJS = pdcx11.o x11.o sb.o ScrollBox.o

PANOBJS = panel.o

LIBSHOBJS = addch.sho addchstr.sho addstr.sho attr.sho beep.sho bkgd.sho \
border.sho clear.sho color.sho delch.sho deleteln.sho getch.sho \
getstr.sho getyx.sho inch.sho inchstr.sho initscr.sho inopts.sho \
insch.sho insstr.sho instr.sho kernel.sho mouse.sho move.sho outopts.sho \
overlay.sho pad.sho printw.sho refresh.sho scanw.sho scr_dump.sho \
scroll.sho slk.sho termattr.sho terminfo.sho touch.sho util.sho \
window.sho

PDCSHOBJS = pdcclip.sho pdcdebug.sho pdcdisp.sho pdcgetsc.sho pdckbd.sho \
pdckey.sho pdcscrn.sho pdcsetsc.sho pdcutil.sho pdcwin.sho

X11SHOBJS = pdcx11.sho x11.sho sb.sho ScrollBox.sho


SHOFILES = $(LIBSHOBJS) $(PDCSHOBJS) $(X11SHOBJS)

libXCurses.a : $(LIBOBJS) $(PDCOBJS) $(X11OBJS)
	ar rv $@ $?
	-$(RANLIB) $@

libpanel.a : $(PANOBJS)
	ar rv $@ $?
	-$(RANLIB) $@

$(SHLPRE)$(SHLFILE)$(SHLPST) : $(SHOFILES)
#	cp $(srcdir)/../win32/curses.def ./cygwin.def
	$(LD_RXLIB1) $(RXPACKEXPORTS) -o $@ $(SHOFILES) $(LD_RXLIB2)

addch.o: $(srcdir)/addch.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/addch.c

addchstr.o: $(srcdir)/addchstr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/addchstr.c

addstr.o: $(srcdir)/addstr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/addstr.c

attr.o: $(srcdir)/attr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/attr.c

beep.o: $(srcdir)/beep.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/beep.c

bkgd.o: $(srcdir)/bkgd.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/bkgd.c

border.o: $(srcdir)/border.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/border.c

clear.o: $(srcdir)/clear.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/clear.c

color.o: $(srcdir)/color.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/color.c

delch.o: $(srcdir)/delch.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/delch.c

deleteln.o: $(srcdir)/deleteln.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/deleteln.c

getch.o: $(srcdir)/getch.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/getch.c

getstr.o: $(srcdir)/getstr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/getstr.c

getyx.o: $(srcdir)/getyx.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/getyx.c

inch.o: $(srcdir)/inch.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/inch.c

inchstr.o: $(srcdir)/inchstr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/inchstr.c

initscr.o: $(srcdir)/initscr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/initscr.c

inopts.o: $(srcdir)/inopts.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/inopts.c

insch.o: $(srcdir)/insch.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/insch.c

insstr.o: $(srcdir)/insstr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/insstr.c

instr.o: $(srcdir)/instr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/instr.c

kernel.o: $(srcdir)/kernel.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/kernel.c

mouse.o: $(srcdir)/mouse.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/mouse.c

move.o: $(srcdir)/move.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/move.c

outopts.o: $(srcdir)/outopts.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/outopts.c

overlay.o: $(srcdir)/overlay.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/overlay.c

pad.o: $(srcdir)/pad.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/pad.c

printw.o: $(srcdir)/printw.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/printw.c

refresh.o: $(srcdir)/refresh.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/refresh.c

scanw.o: $(srcdir)/scanw.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/scanw.c

scr_dump.o: $(srcdir)/scr_dump.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/scr_dump.c

scroll.o: $(srcdir)/scroll.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/scroll.c

slk.o: $(srcdir)/slk.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/slk.c

termattr.o: $(srcdir)/termattr.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/termattr.c

terminfo.o: $(srcdir)/terminfo.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/terminfo.c

touch.o: $(srcdir)/touch.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/touch.c

util.o: $(srcdir)/util.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/util.c

window.o: $(srcdir)/window.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/window.c


pdcclip.o: $(osdir)/pdcclip.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcclip.c

pdcdebug.o: $(srcdir)/pdcdebug.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/pdcdebug.c

pdcdisp.o: $(osdir)/pdcdisp.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcdisp.c

pdcgetsc.o: $(osdir)/pdcgetsc.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcgetsc.c

pdckbd.o: $(osdir)/pdckbd.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdckbd.c

pdckey.o: $(srcdir)/pdckey.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/pdckey.c

pdcscrn.o: $(osdir)/pdcscrn.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcscrn.c

pdcsetsc.o: $(osdir)/pdcsetsc.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcsetsc.c

pdcutil.o: $(osdir)/pdcutil.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcutil.c

pdcwin.o: $(srcdir)/pdcwin.c $(PDCURSES_HEADERS)
	$(CC) $(CCFLAGS) -o $@ $(srcdir)/pdcwin.c

pdcx11.o: $(osdir)/pdcx11.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/pdcx11.c

ScrollBox.o: $(osdir)/ScrollBox.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/ScrollBox.c

sb.o: $(osdir)/sb.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/sb.c

x11.o: $(osdir)/x11.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(CC) $(CCFLAGS) -o $@ $(osdir)/x11.c

#------------------------------------------------------------------------

panel.o: $(pandir)/panel.c $(PDCURSES_HEADERS) $(PDCURSES_HOME)/panel.h
	$(CC) $(CCFLAGS) -o $@ $(pandir)/panel.c

#------------------------------------------------------------------------

addch.sho: $(srcdir)/addch.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/addch.c
	$(O2SHO)
	$(SAVE2O)

addchstr.sho: $(srcdir)/addchstr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/addchstr.c
	$(O2SHO)
	$(SAVE2O)

addstr.sho: $(srcdir)/addstr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/addstr.c
	$(O2SHO)
	$(SAVE2O)

attr.sho: $(srcdir)/attr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/attr.c
	$(O2SHO)
	$(SAVE2O)

beep.sho: $(srcdir)/beep.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/beep.c
	$(O2SHO)
	$(SAVE2O)

bkgd.sho: $(srcdir)/bkgd.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/bkgd.c
	$(O2SHO)
	$(SAVE2O)

border.sho: $(srcdir)/border.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/border.c
	$(O2SHO)
	$(SAVE2O)

clear.sho: $(srcdir)/clear.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/clear.c
	$(O2SHO)
	$(SAVE2O)

color.sho: $(srcdir)/color.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/color.c
	$(O2SHO)
	$(SAVE2O)

delch.sho: $(srcdir)/delch.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/delch.c
	$(O2SHO)
	$(SAVE2O)

deleteln.sho: $(srcdir)/deleteln.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/deleteln.c
	$(O2SHO)
	$(SAVE2O)

getch.sho: $(srcdir)/getch.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/getch.c
	$(O2SHO)
	$(SAVE2O)

getstr.sho: $(srcdir)/getstr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/getstr.c
	$(O2SHO)
	$(SAVE2O)

getyx.sho: $(srcdir)/getyx.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/getyx.c
	$(O2SHO)
	$(SAVE2O)

inch.sho: $(srcdir)/inch.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/inch.c
	$(O2SHO)
	$(SAVE2O)

inchstr.sho: $(srcdir)/inchstr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/inchstr.c
	$(O2SHO)
	$(SAVE2O)

initscr.sho: $(srcdir)/initscr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/initscr.c
	$(O2SHO)
	$(SAVE2O)

inopts.sho: $(srcdir)/inopts.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/inopts.c
	$(O2SHO)
	$(SAVE2O)

insch.sho: $(srcdir)/insch.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/insch.c
	$(O2SHO)
	$(SAVE2O)

insstr.sho: $(srcdir)/insstr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/insstr.c
	$(O2SHO)
	$(SAVE2O)

instr.sho: $(srcdir)/instr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/instr.c
	$(O2SHO)
	$(SAVE2O)

kernel.sho: $(srcdir)/kernel.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/kernel.c
	$(O2SHO)
	$(SAVE2O)

mouse.sho: $(srcdir)/mouse.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/mouse.c
	$(O2SHO)
	$(SAVE2O)

move.sho: $(srcdir)/move.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/move.c
	$(O2SHO)
	$(SAVE2O)

outopts.sho: $(srcdir)/outopts.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/outopts.c
	$(O2SHO)
	$(SAVE2O)

overlay.sho: $(srcdir)/overlay.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/overlay.c
	$(O2SHO)
	$(SAVE2O)

pad.sho: $(srcdir)/pad.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/pad.c
	$(O2SHO)
	$(SAVE2O)

printw.sho: $(srcdir)/printw.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/printw.c
	$(O2SHO)
	$(SAVE2O)

refresh.sho: $(srcdir)/refresh.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/refresh.c
	$(O2SHO)
	$(SAVE2O)

scanw.sho: $(srcdir)/scanw.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/scanw.c
	$(O2SHO)
	$(SAVE2O)

scr_dump.sho: $(srcdir)/scr_dump.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/scr_dump.c
	$(O2SHO)
	$(SAVE2O)

scroll.sho: $(srcdir)/scroll.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/scroll.c
	$(O2SHO)
	$(SAVE2O)

slk.sho: $(srcdir)/slk.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/slk.c
	$(O2SHO)
	$(SAVE2O)

termattr.sho: $(srcdir)/termattr.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/termattr.c
	$(O2SHO)
	$(SAVE2O)

terminfo.sho: $(srcdir)/terminfo.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/terminfo.c
	$(O2SHO)
	$(SAVE2O)

touch.sho: $(srcdir)/touch.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/touch.c
	$(O2SHO)
	$(SAVE2O)

util.sho: $(srcdir)/util.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/util.c
	$(O2SHO)
	$(SAVE2O)

window.sho: $(srcdir)/window.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/window.c
	$(O2SHO)
	$(SAVE2O)


pdcclip.sho: $(osdir)/pdcclip.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcclip.c
	$(O2SHO)
	$(SAVE2O)

pdcdebug.sho: $(srcdir)/pdcdebug.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/pdcdebug.c
	$(O2SHO)
	$(SAVE2O)

pdcdisp.sho: $(osdir)/pdcdisp.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcdisp.c
	$(O2SHO)
	$(SAVE2O)

pdcgetsc.sho: $(osdir)/pdcgetsc.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcgetsc.c
	$(O2SHO)
	$(SAVE2O)

pdckbd.sho: $(osdir)/pdckbd.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdckbd.c
	$(O2SHO)
	$(SAVE2O)

pdckey.sho: $(srcdir)/pdckey.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/pdckey.c
	$(O2SHO)
	$(SAVE2O)

pdcscrn.sho: $(osdir)/pdcscrn.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcscrn.c
	$(O2SHO)
	$(SAVE2O)

pdcsetsc.sho: $(osdir)/pdcsetsc.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcsetsc.c
	$(O2SHO)
	$(SAVE2O)

pdcutil.sho: $(osdir)/pdcutil.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcutil.c
	$(O2SHO)
	$(SAVE2O)

pdcwin.sho: $(srcdir)/pdcwin.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(srcdir)/pdcwin.c
	$(O2SHO)
	$(SAVE2O)

pdcx11.sho: $(osdir)/pdcx11.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/pdcx11.c
	$(O2SHO)
	$(SAVE2O)

ScrollBox.sho: $(osdir)/ScrollBox.c $(PDCURSES_HEADERS) $(PDCURSES_X11_H)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/ScrollBox.c
	$(O2SHO)
	$(SAVE2O)

sb.sho: $(osdir)/sb.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/sb.c
	$(O2SHO)
	$(SAVE2O)

x11.sho: $(osdir)/x11.c $(PDCURSES_HEADERS)
	$(O2SAVE)
	$(CC) $(CCFLAGS) $(DYN_COMP) $(CC2O) $(osdir)/x11.c
	$(O2SHO)
	$(SAVE2O)

#------------------------------------------------------------------------

firework: firework.o $(LIBCURSES)
	$(LINK) firework.o -o $@ $(LDFLAGS)

newdemo: newdemo.o $(LIBCURSES)
	$(LINK) newdemo.o -o $@ $(LDFLAGS)

ptest: ptest.o $(LIBCURSES) $(LIBPANEL)
#	$(LINK) ptest.o -o $@ $(PANEL_LIB) $(LDFLAGS)
	$(LINK) ptest.o -o $@ $(LIBPANEL) $(LDFLAGS)

rain: rain.o $(LIBCURSES)
	$(LINK) rain.o -o $@ $(LDFLAGS)

testcurs: testcurs.o $(LIBCURSES)
	$(LINK) testcurs.o -o $@ $(LDFLAGS)

tuidemo: tuidemo.o tui.o $(LIBCURSES)
	$(LINK) tui.o tuidemo.o -o $@ $(LDFLAGS)

worm: worm.o $(LIBCURSES)
	$(LINK) worm.o -o $@ $(LDFLAGS)

xmas: xmas.o $(LIBCURSES)
	$(LINK) xmas.o -o $@ $(LDFLAGS)


firework.o: $(demodir)/firework.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/firework.c

newdemo.o: $(demodir)/newdemo.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/newdemo.c

ptest.o: $(demodir)/ptest.c $(PDCURSES_HOME)/panel.h $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/ptest.c

rain.o: $(demodir)/rain.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/rain.c

testcurs.o: $(demodir)/testcurs.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/testcurs.c

tui.o: $(demodir)/tui.c $(demodir)/tui.h $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/tui.c

tuidemo.o: $(demodir)/tuidemo.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/tuidemo.c

worm.o: $(demodir)/worm.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/worm.c

xmas.o: $(demodir)/xmas.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) -o $@ $(demodir)/xmas.c

#
# This section provides for compiling and linking the
# ncurses test programs.
#
ncurses_testdir	= $(HOME)/ncurses-5.5/test

NCURSES_TESTS	= bs gdc hanoi knight tclock ncurses

ncurses_tests: $(NCURSES_TESTS)

ncurses_clean:
	-rm -f *.o trace $(NCURSES_TESTS)

NCFLAGS=-I$(ncurses_testdir)

bs: bs.o $(LIBCURSES)
	$(LINK) bs.o -o $@ $(LDFLAGS)

gdc: gdc.o $(LIBCURSES)
	$(LINK) gdc.o -o $@ $(LDFLAGS)

hanoi: hanoi.o $(LIBCURSES)
	$(LINK) hanoi.o -o $@ $(LDFLAGS)

knight: knight.o $(LIBCURSES)
	$(LINK) knight.o -o $@ $(LDFLAGS)

tclock: tclock.o $(LIBCURSES)
	$(LINK) tclock.o -o $@ $(LDFLAGS) -lm

view: view.o $(LIBCURSES)
	$(LINK) view.o -o $@ $(LDFLAGS)

ncurses: ncurses.o $(LIBCURSES) $(LIBPANEL)
	$(LINK) ncurses.o -o $@ $(LDFLAGS) $(LIBPANEL)

bs.o: $(ncurses_testdir)/bs.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/bs.c

gdc.o: $(ncurses_testdir)/gdc.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/gdc.c

hanoi.o: $(ncurses_testdir)/hanoi.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/hanoi.c

knight.o: $(ncurses_testdir)/knight.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/knight.c

tclock.o: $(ncurses_testdir)/tclock.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/tclock.c

view.o: $(ncurses_testdir)/view.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/view.c

ncurses.o: $(ncurses_testdir)/ncurses.c $(PDCURSES_CURSES_H)
	$(CC) $(CCFLAGS) $(NCFLAGS) -o $@ $(ncurses_testdir)/ncurses.c
